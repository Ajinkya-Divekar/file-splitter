<div class="pdf-container">
  <pdf-viewer
    class="pdf-viewer"
    [hidden]="!pdfLoaded"
    [src]="pdfSrc"
    [zoom]="0.75"
    [page]="1"
    [show-all]="false"
    [original-size]="true"
    [render-text]="false"
    (after-load-complete)="onPdfLoadComplete($event)"
    style="width: 1px; height: 1px; opacity: 0.01"
  ></pdf-viewer>

  <div class="split-layout" *ngIf="pdfLoaded">
    <!-- ðŸ“Œ LEFT: Metadata sidebar -->
    <div class="meta-panel">
      <div *ngFor="let section of sections; let i = index" class="meta-item">
        <strong>{{ section.name }}</strong><br />
        Page: {{ section.start }} - {{ section.end }}
      </div>
    </div>

    <!-- ðŸ“„ RIGHT: PDF strip -->
    <div class="pdf-strip-wrapper">
      <div class="pdf-strip" #pdfStrip>
        <div
          *ngFor="let line of splitLines; let i = index"
          class="drag-line"
          [ngStyle]="{ transform: 'translateX(' + line.x + 'px)' }"
          cdkDrag
          [cdkDragLockAxis]="'x'"
          (cdkDragStarted)="onDragStart(i)"
          (cdkDragEnded)="onDragEnd($event, i)"
        ></div>

        <ng-container *ngFor="let page of pages; let i = index">
          <div class="snap-target debug" #snapTarget></div>
          <div class="pdf-box">
            <pdf-viewer
              [src]="pdfSrc"
              [zoom]="zoomLevel"
              [page]="page"
              [show-all]="false"
              [original-size]="false"
              [render-text]="true"
              [ngStyle]="{
    width: '300px',
    height: '400px',
    'margin-top': getZoomMarginPercent(zoomLevel)
  }"
            ></pdf-viewer>
          </div>
        </ng-container>

        <div class="snap-target debug" #snapTarget></div>
      </div>
    </div>
  </div>
</div>
